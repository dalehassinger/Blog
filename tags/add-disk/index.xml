<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Add Disk - Tag - vCROCS</title>
        <link>https://www.vcrocs.info/tags/add-disk/</link>
        <description>Add Disk - Tag - vCROCS</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><managingEditor>Dale.Hassinger@vCROCS.info (| Dale Hassinger)</managingEditor>
            <webMaster>Dale.Hassinger@vCROCS.info (| Dale Hassinger)</webMaster><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Sun, 19 Apr 2020 00:00:00 &#43;0000</lastBuildDate><atom:link href="https://www.vcrocs.info/tags/add-disk/" rel="self" type="application/rss+xml" /><item>
    <title>Add disk to a Remote Windows Server | VMware VM</title>
    <link>https://www.vcrocs.info/add-drives/</link>
    <pubDate>Sun, 19 Apr 2020 00:00:00 &#43;0000</pubDate>
    <author>Dale Hassinger</author>
    <guid>https://www.vcrocs.info/add-drives/</guid>
    <description><![CDATA[<p><strong>Add disk to a Remote Windows Server | VMware VM</strong></p>
<hr>
<h6 id="powershell-code">PowerShell Code</h6>
<p>Powershell code to add disk to a Remote Windows Server | VMware VM:</p>
<hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="c">#The Following code shows how to add a New Drive, bring drive online, initialize and format:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">#Connect to vCenter</span>
</span></span><span class="line"><span class="cl"><span class="nb">Connect-VIServer</span> <span class="n">vCenter</span><span class="p">.</span><span class="py">vCROCS</span><span class="p">.</span><span class="py">info</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">#Add new drive to VM</span>
</span></span><span class="line"><span class="cl"><span class="nb">New-HardDisk</span> <span class="n">-VM</span> <span class="nv">$VMNAME</span> <span class="n">-CapacityGB</span> <span class="nv">$DISKSIZEGB</span> <span class="n">-StorageFormat</span> <span class="n">Thin</span> <span class="n">-Controller</span> <span class="err">‘</span><span class="n">SCSI</span> <span class="n">Controller</span> <span class="mf">1</span><span class="err">’</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">#Make disk online</span>
</span></span><span class="line"><span class="cl"><span class="nb">invoke-command</span> <span class="n">-computername</span> <span class="nv">$VMNAME</span> <span class="n">-scriptblock</span> <span class="p">{</span><span class="nb">Set-Disk</span> <span class="mf">2</span> <span class="n">-isOffline</span> <span class="vm">$false</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">#Initialize disk</span>
</span></span><span class="line"><span class="cl"><span class="nb">invoke-command</span> <span class="n">-computername</span> <span class="nv">$VMNAME</span> <span class="n">-scriptblock</span> <span class="p">{</span><span class="nb">Initialize-Disk</span> <span class="mf">2</span> <span class="n">-PartitionStyle</span> <span class="n">GPT</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">#Create Partition</span>
</span></span><span class="line"><span class="cl"><span class="nb">invoke-command</span> <span class="n">-computername</span> <span class="nv">$VMNAME</span> <span class="n">-scriptblock</span> <span class="p">{</span><span class="nb">New-Partition</span> <span class="n">-DiskNumber</span> <span class="mf">2</span> <span class="n">-UseMaximumSize</span> <span class="n">-DriveLetter</span> <span class="n">E</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">#Format drive</span>
</span></span><span class="line"><span class="cl"><span class="nb">invoke-command</span> <span class="n">-computername</span> <span class="nv">$VMNAME</span> <span class="n">-scriptblock</span> <span class="p">{</span><span class="nb">Format-Volume</span> <span class="n">-DriveLetter</span> <span class="n">E</span> <span class="n">-FileSystem</span> <span class="n">NTFS</span> <span class="n">-NewFileSystemLabel</span> <span class="err">‘</span><span class="n">Data</span><span class="err">’</span> <span class="n">-AllocationUnitSize</span> <span class="mf">16384</span> <span class="n">-Confirm:</span><span class="vm">$false</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">#-------------------------------------------------------------------------</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">#The Following Code will show disk “Allocation Unit Size” on a remote Windows Server:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$C</span> <span class="p">=</span> <span class="nb">Invoke-Command</span> <span class="n">-ComputerName</span> <span class="nv">$VMname</span> <span class="p">{</span><span class="nb">Get-WmiObject</span> <span class="n">-Class</span> <span class="n">Win32_Volume</span> <span class="n">-Filter</span> <span class="err">“</span><span class="n">DriveLetter</span> <span class="p">=</span> <span class="err">‘</span><span class="n">C:</span><span class="err">&#39;”</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">BLOCKSIZE</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nv">$C_AllocationUnitSize</span> <span class="p">=</span> <span class="p">(</span><span class="nv">$C</span><span class="p">.</span><span class="n">BLOCKSIZE</span><span class="p">/</span><span class="mf">1024</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">$C_AllocationUnitSize</span> <span class="p">=</span> <span class="err">‘</span><span class="n">Disk</span> <span class="n">Allocation</span> <span class="n">Unit</span> <span class="n">Size</span><span class="err">:</span> <span class="err">‘</span> <span class="p">+</span> <span class="nv">$C_AllocationUnitSize</span> <span class="p">+</span> <span class="err">‘</span><span class="n">k</span><span class="err">’</span>
</span></span><span class="line"><span class="cl"><span class="nv">$C_AllocationUnitSize</span></span></span></code></pre></td></tr></table>
</div>
</div>
<hr>
<ul>
<li>If you like wearing Crocs and want to get a pair like I wear, follow this link:
<a target="_blank" href="https://www.amazon.com/dp/B001V7Z27W?psc=1&amp;ref=ppx_yo2ov_dt_b_product_details&_encoding=UTF8&tag=vcrocs-20&linkCode=ur2&linkId=fa4c787c9ab59a9b8a54b48c402b8517&camp=1789&creative=9325">My Favorite Crocs</a></li>
<li>If you found this Blog article useful and it helped you, Buy me a coffee to start my day.</li>
</ul>
<center>
<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="dalehassinger" data-color="#FFDD00" data-emoji=""  data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>
</center>
<hr>
<ul>
<li>If you like wearing Crocs and want to get a pair like I wear, follow this link to Amazon:
<a target="_blank" href="https://www.amazon.com/dp/B001V7Z27W?psc=1&amp;ref=ppx_yo2ov_dt_b_product_details&_encoding=UTF8&tag=vcrocs-20&linkCode=ur2&linkId=fa4c787c9ab59a9b8a54b48c402b8517&camp=1789&creative=9325">My Favorite Crocs</a></li>
<li>If you found this Blog article useful and it helped you, Buy me a coffee to start my day.</li>
</ul>
<center>
<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="dalehassinger" data-color="#FFDD00" data-emoji=""  data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>
</center>]]></description>
</item>
</channel>
</rss>
