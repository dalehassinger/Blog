<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>VCF Operations for Logs | How to Automate URL Generation for Filtering Results - vCROCS</title><meta name="Description" content="Enterprise Automation, Monitoring and Logging. Plus more..."><meta property="og:url" content="https://www.vcrocs.info/vcf-operations-for-logs-filter-url-notifcation/">
  <meta property="og:site_name" content="vCROCS">
  <meta property="og:title" content="VCF Operations for Logs | How to Automate URL Generation for Filtering Results">
  <meta property="og:description" content="How to Create a URL for Filtering Log Results and Share It with Others.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-10-21T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-10-21T00:00:00+00:00">
    <meta property="article:tag" content="VCF">
    <meta property="article:tag" content="Automation">
    <meta property="article:tag" content="Deployments">
    <meta property="article:tag" content="Operations">
    <meta property="article:tag" content="Syslog">
    <meta property="article:tag" content="PowerShell">
    <meta property="og:image" content="https://www.vcrocs.info/vcf-operations-for-logs-filter-url-notifcation/featured-image.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://www.vcrocs.info/vcf-operations-for-logs-filter-url-notifcation/featured-image.png">
  <meta name="twitter:title" content="VCF Operations for Logs | How to Automate URL Generation for Filtering Results">
  <meta name="twitter:description" content="How to Create a URL for Filtering Log Results and Share It with Others.">
      <meta name="twitter:site" content="@dalehassinger">
<meta name="application-name" content="vCROCS">
<meta name="apple-mobile-web-app-title" content="vCROCS"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="canonical" href="https://www.vcrocs.info/vcf-operations-for-logs-filter-url-notifcation/" /><link rel="prev" href="https://www.vcrocs.info/vcf-operations-for-logs-syslog-api/" /><link rel="next" href="https://www.vcrocs.info/vcf-operations-dashboard-samples/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "VCF Operations for Logs | How to Automate URL Generation for Filtering Results",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/www.vcrocs.info\/vcf-operations-for-logs-filter-url-notifcation\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/www.vcrocs.info\/vcf-operations-for-logs-filter-url-notifcation\/featured-image.png",
                            "width":  1420 ,
                            "height":  708 
                        }],"genre": "posts","keywords": "VCF, Automation, Deployments, Operations, syslog, PowerShell","wordcount":  2136 ,
        "url": "https:\/\/www.vcrocs.info\/vcf-operations-for-logs-filter-url-notifcation\/","datePublished": "2024-10-21T00:00:00+00:00","dateModified": "2024-10-21T00:00:00+00:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/www.vcrocs.info\/images\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "Dale Hassinger"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7670183691519835" crossorigin="anonymous"></script>
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="vCROCS"><span class="header-title-pre"><i class='far fa-house fa-solid'></i></span>vCROCS</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/links/" title="Links"><i class='fab fa-bookmark fa-regular' aria-hidden='true'></i>  </a><a class="menu-item" href="/pics/" title="Pics"><i class='fab fa-image fa-regular' aria-hidden='true'></i>  </a><a class="menu-item" href="https://twitter.com/dalehassinger" title="Twitter" rel="noopener noreffer" target="_blank"><i class='fab fa-twitter'></i>  </a><a class="menu-item" href="https://www.youtube.com/playlist?list=PLqjVNzdDCzwZXR3lfqaFX_hZI3zB8nsVF" title="Podcast" rel="noopener noreffer" target="_blank"><i class='fa fa-podcast fa-fw' aria-hidden='true'></i>  </a><a class="menu-item" href="/disclaimer/" title="Disclaimer"><i class='fa-regular fa-file' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7670183691519835" crossorigin="anonymous"></script>
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="vCROCS"><span class="header-title-pre"><i class='far fa-house fa-solid'></i></span>vCROCS</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/links/" title="Links"><i class='fab fa-bookmark fa-regular' aria-hidden='true'></i></a><a class="menu-item" href="/pics/" title="Pics"><i class='fab fa-image fa-regular' aria-hidden='true'></i></a><a class="menu-item" href="https://twitter.com/dalehassinger" title="Twitter" rel="noopener noreffer" target="_blank"><i class='fab fa-twitter'></i></a><a class="menu-item" href="https://www.youtube.com/playlist?list=PLqjVNzdDCzwZXR3lfqaFX_hZI3zB8nsVF" title="Podcast" rel="noopener noreffer" target="_blank"><i class='fa fa-podcast fa-fw' aria-hidden='true'></i></a><a class="menu-item" href="/disclaimer/" title="Disclaimer"><i class='fa-regular fa-file' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">VCF Operations for Logs | How to Automate URL Generation for Filtering Results</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://twitter.com/dalehassinger" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Dale Hassinger</a></span>&nbsp;<span class="post-category">included in <a href="/categories/vcf-operations/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>VCF Operations</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-10-21">2024-10-21</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;2136 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;11 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/vcf-operations-for-logs-filter-url-notifcation/featured-image.png"
        data-srcset="/vcf-operations-for-logs-filter-url-notifcation/featured-image.png, /vcf-operations-for-logs-filter-url-notifcation/featured-image.png 1.5x, /vcf-operations-for-logs-filter-url-notifcation/featured-image.png 2x"
        data-sizes="auto"
        alt="/vcf-operations-for-logs-filter-url-notifcation/featured-image.png"
        title="/vcf-operations-for-logs-filter-url-notifcation/featured-image.png" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li>
              <ul>
                <li>
                  <ul>
                    <li><a href="#example-code">Example Code:</a></li>
                    <li><a href="#screen-shots">Screen Shots:</a></li>
                    <li><a href="#lessons-learned">Lessons Learned:</a></li>
                    <li><a href="#links-to-resources-discussed-is-this-blog-post">Links to resources discussed is this Blog Post:</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p><strong>How to Create a URL for Filtering Log Results and Share It with Others.</strong></p>
<hr>
<blockquote>
<p>I have not failed. I’ve just found 10,000 ways that won’t work. – Thomas Edison</p></blockquote>
<hr>
<p><small><strong>Note: VCF Operations for Logs 8.18.0 was used to create this Blog</strong></small></p>
<p>In my previous blog, I focused on how to send log events to the <strong>VCF Operations for Logs API</strong>. <a href="https://www.vcrocs.info/vcf-operations-for-logs-syslog-api/" target="_blank" rel="noopener noreffer ">Click here to read&hellip;</a> In this blog, I’ll demonstrate how to <strong>generate a URL</strong> that connects to VCF Operations for Logs and automatically applies a <strong>filter</strong> based on the log events you’ve just sent.</p>
<p>When running an automation script, as shown in the example below, I want the results to be saved in <strong>VCF Operations for Logs</strong>. To make it easier for the person running the script to view the logged events, I’ve incorporated the generation of the VCF Operations for Logs URL directly into the automation script. When reviewing the VCF Operations for Logs URL format, I found that it wasn’t very human-readable.</p>
<hr>
<p>Example URL to filter events for VCF Operations for Logs:<br>
<small><span style="color: red; font-weight: bold;">Click arrow to expand the code:</span></small><br>
<small></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">vaol</span><span class="o">.</span><span class="n">vcrocs</span><span class="o">.</span><span class="n">local</span><span class="o">/</span><span class="n">explorer</span><span class="o">/</span><span class="err">?</span><span class="n">existingChartQuery</span><span class="o">=%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">query</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">startTimeMillis</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A1729528045745</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">endTimeMillis</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A1729614745743</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">piqlFunctionGroups</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">5</span><span class="n">B</span><span class="o">%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">functions</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">5</span><span class="n">B</span><span class="o">%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">label</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">Count</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">value</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">COUNT</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">requiresField</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Afalse</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">numericOnly</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Afalse</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span><span class="o">%</span><span class="mi">5</span><span class="n">D</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">field</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Anull</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span><span class="o">%</span><span class="mi">5</span><span class="n">D</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">dateFilterPreset</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">CUSTOM</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">shouldGroupByTime</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Atrue</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">includeAllContentPackFields</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Atrue</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">eventSortOrder</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">DESC</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">summarySortOrder</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">DESC</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">compareQueryOrderBy</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">TREND</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">compareQuerySortOrder</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">DESC</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">compareQueryOptions</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Anull</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">messageViewType</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">EVENTS</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">constraintToggle</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">ALL</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">piqlFunction</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">label</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">Count</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">value</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">COUNT</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">requiresField</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Afalse</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">numericOnly</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Afalse</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">piqlFunctionField</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Anull</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">fieldConstraints</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">5</span><span class="n">B</span><span class="o">%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">internalName</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">appname</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">operator</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">STARTS_WITH</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">value</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">vcf_automation</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">internalName</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">text</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">operator</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">CONTAINS</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">value</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">VM</span><span class="o">%</span><span class="mi">20</span><span class="n">Build</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">internalName</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">vmw_esxi_vm_name</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">operator</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">CONTAINS</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">value</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">22</span><span class="n">vCROCS</span><span class="o">-</span><span class="n">W2K22</span><span class="o">-</span><span class="mi">06</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span><span class="o">%</span><span class="mi">5</span><span class="n">D</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">supplementalConstraints</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">5</span><span class="n">B</span><span class="o">%</span><span class="mi">5</span><span class="n">D</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">groupByFields</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">5</span><span class="n">B</span><span class="o">%</span><span class="mi">5</span><span class="n">D</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">contentPacksToIncludeFields</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">5</span><span class="n">B</span><span class="o">%</span><span class="mi">5</span><span class="n">D</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">extractedFields</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">5</span><span class="n">B</span><span class="o">%</span><span class="mi">5</span><span class="n">D</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span><span class="o">&amp;</span><span class="n">chartOptions</span><span class="o">=%</span><span class="mi">7</span><span class="n">B</span><span class="o">%</span><span class="mi">22</span><span class="n">logaxis</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Afalse</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">trendline</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Afalse</span><span class="o">%</span><span class="mi">2</span><span class="n">C</span><span class="o">%</span><span class="mi">22</span><span class="n">spline</span><span class="o">%</span><span class="mi">22</span><span class="o">%</span><span class="mi">3</span><span class="n">Afalse</span><span class="o">%</span><span class="mi">7</span><span class="n">D</span>
</span></span><span class="line"><span class="cl"> 
</span></span></code></pre></td></tr></table>
</div>
</div></small>
<hr>
<p>To simplify the generation of the VCF Operations for Logs URL that includes a filter, I created a function that accepts parameters for the required filter items. In my example, I’m embedding the generated URL in an email, making it easy to click and have VCF Operations for Logs open  directly to your filtered data. I love Automation!</p>
<hr>
<h6 id="example-code">Example Code:</h6>
<p>(3) Functions:</p>
<ul>
<li>Function to Send event logs to VCF Operations for Logs API</li>
<li>Function to generate the VCF Operations for Logs URL</li>
<li>Function to send the email with the link in the email body</li>
</ul>
<p><small><span style="color: red; font-weight: bold;">Click arrow to expand the code:</span></small></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Function to send event data to Aria Operations for Logs</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span><span class="w"> </span><span class="nb">Send-ApiEvent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">Param</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="c"># Parameters with default values, can be overridden as needed.</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$Uri</span>              <span class="p">=</span> <span class="s1">&#39;https://vaol-vip.vcrocs.local:9543/api/v2/events&#39;</span><span class="p">,</span>  <span class="c"># API Endpoint to send the event data</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$priority</span>         <span class="p">=</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span>                    <span class="c"># Event priority (info, warning, error, etc.)</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$facility</span>         <span class="p">=</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span>                    <span class="c"># Source generating the event (user, system, etc.)</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$appname</span>          <span class="p">=</span> <span class="s1">&#39;VCF_Automation&#39;</span><span class="p">,</span>          <span class="c"># Application name logging the event</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$hostname</span>         <span class="p">=</span> <span class="s1">&#39;NA&#39;</span><span class="p">,</span>                      <span class="c"># Hostname of the system (optional)</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$vmw_esxi_vm_name</span> <span class="p">=</span> <span class="s1">&#39;NA&#39;</span><span class="p">,</span>                      <span class="c"># Name of the VM or ESXi host (optional)</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$vmw_vcenter</span>      <span class="p">=</span> <span class="s1">&#39;NA&#39;</span><span class="p">,</span>                      <span class="c"># Name of the vCenter (optional)</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$vmw_cluster</span>      <span class="p">=</span> <span class="s1">&#39;NA&#39;</span><span class="p">,</span>                      <span class="c"># Name of the vCenter cluster (optional)</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$vmw_host</span>         <span class="p">=</span> <span class="s1">&#39;NA&#39;</span><span class="p">,</span>                      <span class="c"># Name of the vCenter Host (optional)</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$Text</span>             <span class="p">=</span> <span class="s2">&#34;Custom Script execution&#34;</span>  <span class="c"># Custom text describing the event</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="c"># End Param</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Define headers for the REST API call, using JSON for content type and response format.</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$headers</span> <span class="p">=</span> <span class="vm">@</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;accept&#39;</span>       <span class="p">=</span> <span class="s1">&#39;application/json&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;Content-Type&#39;</span> <span class="p">=</span> <span class="s1">&#39;application/json&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="c"># End headers</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Construct the JSON body for the API request using a here-string.</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$body</span> <span class="p">=</span> <span class="sh">@&#34;
</span></span></span><span class="line"><span class="cl"><span class="sh">  [
</span></span></span><span class="line"><span class="cl"><span class="sh">    {
</span></span></span><span class="line"><span class="cl"><span class="sh">      &#34;priority&#34;: &#34;</span><span class="nv">$priority</span><span class="sh">&#34;,
</span></span></span><span class="line"><span class="cl"><span class="sh">      &#34;facility&#34;: &#34;</span><span class="nv">$facility</span><span class="sh">&#34;,
</span></span></span><span class="line"><span class="cl"><span class="sh">      &#34;appname&#34;:  &#34;</span><span class="nv">$appname</span><span class="sh">&#34;,
</span></span></span><span class="line"><span class="cl"><span class="sh">      &#34;hostname&#34;: &#34;</span><span class="nv">$hostname</span><span class="sh">&#34;,
</span></span></span><span class="line"><span class="cl"><span class="sh">      &#34;vmw_esxi_vm_name&#34;: &#34;</span><span class="nv">$vmw_esxi_vm_name</span><span class="sh">&#34;,
</span></span></span><span class="line"><span class="cl"><span class="sh">      &#34;vmw_vcenter&#34;: &#34;</span><span class="nv">$vmw_vcenter</span><span class="sh">&#34;,
</span></span></span><span class="line"><span class="cl"><span class="sh">      &#34;vmw_cluster&#34;: &#34;</span><span class="nv">$vmw_cluster</span><span class="sh">&#34;,
</span></span></span><span class="line"><span class="cl"><span class="sh">      &#34;vmw_host&#34;: &#34;</span><span class="nv">$vmw_host</span><span class="sh">&#34;,
</span></span></span><span class="line"><span class="cl"><span class="sh">      &#34;text&#34;: &#34;</span><span class="nv">$Text</span><span class="sh">&#34;
</span></span></span><span class="line"><span class="cl"><span class="sh">    }
</span></span></span><span class="line"><span class="cl"><span class="sh">  ]
</span></span></span><span class="line"><span class="cl"><span class="sh">&#34;@</span> <span class="c"># End Body</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Send the POST request to the API endpoint within a try-catch block for error handling.</span>
</span></span><span class="line"><span class="cl">  <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c"># Invoke-RestMethod is used to send the API request and return the response.</span>
</span></span><span class="line"><span class="cl">      <span class="nv">$response</span> <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Uri</span> <span class="nv">$Uri</span> <span class="n">-Method</span> <span class="n">Post</span> <span class="n">-Headers</span> <span class="nv">$headers</span> <span class="n">-Body</span> <span class="nv">$body</span> <span class="n">-SkipCertificateCheck</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c"># Output the API response if successful.</span>
</span></span><span class="line"><span class="cl">      <span class="nb">Write-Host</span> <span class="s2">&#34;API response: &#34;</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span></span><span class="line"><span class="cl">      <span class="nv">$response</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c"># Handle any errors that occur during the request and output the error message.</span>
</span></span><span class="line"><span class="cl">      <span class="nb">Write-Host</span> <span class="s2">&#34;Error occurred: </span><span class="p">$(</span><span class="nv">$_</span><span class="p">.</span><span class="py">Exception</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span><span class="s2">&#34;</span> <span class="n">-ForegroundColor</span> <span class="n">Red</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="c"># End try/catch</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c"># Function End</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Example usage of the Send-ApiEvent function.</span>
</span></span><span class="line"><span class="cl"><span class="c"># Customize the message text, add relevant data to $text, and invoke the function.</span>
</span></span><span class="line"><span class="cl"><span class="c">#$text = &#34;VM Build: &#34; + &#34;A new process has been created with ID 9876&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c">#Send-ApiEvent -Text $text -vmw_esxi_vm_name &#39;vCROCS-W2K22-02&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Email Function using Gmail</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span><span class="w"> </span><span class="nb">Send-ServerBuildEmail</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">param</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$fromEmail</span> <span class="p">=</span> <span class="s2">&#34;dale.hassinger@gmail.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$toEmail</span> <span class="p">=</span> <span class="s2">&#34;dale.hassinger@vcrocs.info&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$vmName</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$finalUrl</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Gmail email settings</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$appPassword</span> <span class="p">=</span> <span class="s2">&#34;klj-Hack-Me-ytl&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$smtpServer</span>  <span class="p">=</span> <span class="s2">&#34;smtp.gmail.com&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$smtpPort</span>    <span class="p">=</span> <span class="mf">587</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Email subject</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$subject</span> <span class="p">=</span> <span class="s2">&#34;New Server Build: </span><span class="nv">$vmName</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Build the Email body</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$body</span> <span class="p">=</span> <span class="s1">&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&#34;UTF-8&#34;&gt;&lt;title&gt;vCROCS Automation&lt;/title&gt;
</span></span></span><span class="line"><span class="cl"><span class="s1">      &lt;style&gt;
</span></span></span><span class="line"><span class="cl"><span class="s1">          body {
</span></span></span><span class="line"><span class="cl"><span class="s1">              background-color: #ffffff;
</span></span></span><span class="line"><span class="cl"><span class="s1">              color: #000000;
</span></span></span><span class="line"><span class="cl"><span class="s1">              font-family: Arial, sans-serif;
</span></span></span><span class="line"><span class="cl"><span class="s1">              font-size: 14px;
</span></span></span><span class="line"><span class="cl"><span class="s1">              margin: 0;
</span></span></span><span class="line"><span class="cl"><span class="s1">              padding: 20px;
</span></span></span><span class="line"><span class="cl"><span class="s1">          }
</span></span></span><span class="line"><span class="cl"><span class="s1">      &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$body</span> <span class="p">+=</span> <span class="s1">&#39;&lt;body&gt;&lt;p&gt;New Server Build: &#39;</span> <span class="p">+</span> <span class="nv">$vmName</span> <span class="p">+</span> <span class="s1">&#39; is Complete.&lt;/p&gt;&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$body</span> <span class="p">+=</span> <span class="s1">&#39;&lt;p&gt;Link to View Server Build Logs within VCF Operations for Logs: &lt;a href=&#34;&#39;</span> <span class="p">+</span> <span class="nv">$finalUrl</span> <span class="p">+</span> <span class="s1">&#39;&#34;&gt;Click Here&lt;/a&gt;&lt;/p&gt;&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$body</span> <span class="p">+=</span> <span class="s1">&#39;&lt;/body&gt;&lt;/html&gt;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Create the email message</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$emailMessage</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">system</span><span class="p">.</span><span class="py">net</span><span class="p">.</span><span class="py">mail</span><span class="p">.</span><span class="py">mailmessage</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$emailMessage</span><span class="p">.</span><span class="py">From</span> <span class="p">=</span> <span class="nv">$fromEmail</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$emailMessage</span><span class="p">.</span><span class="py">To</span><span class="p">.</span><span class="py">Add</span><span class="p">(</span><span class="nv">$toEmail</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$emailMessage</span><span class="p">.</span><span class="py">Subject</span> <span class="p">=</span> <span class="nv">$subject</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$emailMessage</span><span class="p">.</span><span class="py">Body</span> <span class="p">=</span> <span class="nv">$body</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$emailMessage</span><span class="p">.</span><span class="py">IsBodyHtml</span> <span class="p">=</span> <span class="vm">$true</span>  <span class="c"># Set to true to send HTML emails</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Configure the SMTP client</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$smtpClient</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">system</span><span class="p">.</span><span class="py">net</span><span class="p">.</span><span class="py">mail</span><span class="p">.</span><span class="py">smtpclient</span><span class="p">(</span><span class="nv">$smtpServer</span><span class="p">,</span> <span class="nv">$smtpPort</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$smtpClient</span><span class="p">.</span><span class="py">EnableSsl</span> <span class="p">=</span> <span class="vm">$true</span>  <span class="c"># Gmail requires SSL</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$smtpClient</span><span class="p">.</span><span class="py">Credentials</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">System</span><span class="p">.</span><span class="py">Net</span><span class="p">.</span><span class="py">NetworkCredential</span><span class="p">(</span><span class="nv">$fromEmail</span><span class="p">,</span> <span class="nv">$appPassword</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Send the email</span>
</span></span><span class="line"><span class="cl">  <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nv">$smtpClient</span><span class="p">.</span><span class="py">Send</span><span class="p">(</span><span class="nv">$emailMessage</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">Write-Host</span> <span class="s2">&#34;Email sent successfully.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">Write-Host</span> <span class="s2">&#34;Failed to send email: </span><span class="nv">$_</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Clean up</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$smtpClient</span><span class="p">.</span><span class="py">Dispose</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Example usage of the email function</span>
</span></span><span class="line"><span class="cl"><span class="c">#Send-ServerBuildEmail -toEmail &#34;dale.hassinger@vcrocs.info&#34; -vmName &#34;vcrocs-w2k22-02&#34; -finalUrl $Global:finalUrl</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Function to build URL for VCF Operations for Logs that will auto filter logs based on date|time, VM Name and text</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span><span class="w"> </span><span class="nb">set-filterURL</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">param</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$appname</span> <span class="p">=</span> <span class="s2">&#34;vcf_automation&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$text</span> <span class="p">=</span> <span class="s2">&#34;VM Build:&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$vmwEsxiVmName</span> <span class="p">=</span> <span class="s2">&#34;vcrocs-w2k22-01&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="c"># End Param</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># ----- [ Get current time and 24 hours ago ] ----- </span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c"># Get the current date and time, add 5 minutes</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$currentDate</span> <span class="p">=</span> <span class="p">(</span><span class="nb">Get-Date</span><span class="p">).</span><span class="py">AddMinutes</span><span class="p">(</span><span class="mf">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c"># Calculate the date and time 24 hours ago</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$pastDate</span> <span class="p">=</span> <span class="p">(</span><span class="nb">Get-Date</span><span class="p">).</span><span class="py">AddHours</span><span class="p">(</span><span class="mf">-24</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Convert both dates to Unix timestamps in milliseconds</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$epoch</span> <span class="p">=</span> <span class="p">[</span><span class="no">datetime</span><span class="p">]</span><span class="s2">&#34;1970-01-01 00:00:00&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Convert the current date to a Unix timestamp in milliseconds</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$currentTimestampMillis</span> <span class="p">=</span> <span class="p">[</span><span class="no">int64</span><span class="p">]((</span><span class="nv">$currentDate</span><span class="p">.</span><span class="py">ToUniversalTime</span><span class="p">()</span> <span class="p">-</span> <span class="nv">$epoch</span><span class="p">).</span><span class="n">TotalMilliseconds</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Convert the past date (24 hours ago) to a Unix timestamp in milliseconds</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$pastTimestampMillis</span> <span class="p">=</span> <span class="p">[</span><span class="no">int64</span><span class="p">]((</span><span class="nv">$pastDate</span><span class="p">.</span><span class="py">ToUniversalTime</span><span class="p">()</span> <span class="p">-</span> <span class="nv">$epoch</span><span class="p">).</span><span class="n">TotalMilliseconds</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Output the results</span>
</span></span><span class="line"><span class="cl">  <span class="c">#&#34;Current time in milliseconds: $currentTimestampMillis&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="c">#&#34;24 hours ago in milliseconds: $pastTimestampMillis&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Define the base URL</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$baseUrl</span> <span class="p">=</span> <span class="s2">&#34;https://192.168.6.97/explorer/?existingChartQuery=&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Define the JSON object with placeholders for the parameters</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$jsonObject</span> <span class="p">=</span> <span class="vm">@</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">query</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="n">startTimeMillis</span> <span class="p">=</span> <span class="nv">$pastTimestampMillis</span>
</span></span><span class="line"><span class="cl">      <span class="n">endTimeMillis</span> <span class="p">=</span> <span class="nv">$currentTimestampMillis</span>
</span></span><span class="line"><span class="cl">      <span class="n">piqlFunctionGroups</span> <span class="p">=</span> <span class="vm">@</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="vm">@</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="kd">function</span><span class="nb">s</span> <span class="p">=</span> <span class="vm">@</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                  <span class="vm">@</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="n">label</span> <span class="p">=</span> <span class="s2">&#34;Count&#34;</span>
</span></span><span class="line"><span class="cl">                      <span class="n">value</span> <span class="p">=</span> <span class="s2">&#34;COUNT&#34;</span>
</span></span><span class="line"><span class="cl">                      <span class="n">requiresField</span> <span class="p">=</span> <span class="vm">$false</span>
</span></span><span class="line"><span class="cl">                      <span class="n">numericOnly</span> <span class="p">=</span> <span class="vm">$false</span>
</span></span><span class="line"><span class="cl">                  <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="n">field</span> <span class="p">=</span> <span class="vm">$null</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="n">dateFilterPreset</span> <span class="p">=</span> <span class="s2">&#34;LAST_24_HOURS&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="n">shouldGroupByTime</span> <span class="p">=</span> <span class="vm">$true</span>
</span></span><span class="line"><span class="cl">      <span class="n">includeAllContentPackFields</span> <span class="p">=</span> <span class="vm">$true</span>
</span></span><span class="line"><span class="cl">      <span class="n">eventSortOrder</span> <span class="p">=</span> <span class="s2">&#34;DESC&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="n">summarySortOrder</span> <span class="p">=</span> <span class="s2">&#34;DESC&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="n">compareQueryOrderBy</span> <span class="p">=</span> <span class="s2">&#34;TREND&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="n">compareQuerySortOrder</span> <span class="p">=</span> <span class="s2">&#34;DESC&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="n">compareQueryOptions</span> <span class="p">=</span> <span class="vm">$null</span>
</span></span><span class="line"><span class="cl">      <span class="n">messageViewType</span> <span class="p">=</span> <span class="s2">&#34;EVENTS&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="n">constraintToggle</span> <span class="p">=</span> <span class="s2">&#34;ALL&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="n">piqlFunction</span> <span class="p">=</span> <span class="vm">@</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">label</span> <span class="p">=</span> <span class="s2">&#34;Count&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="n">value</span> <span class="p">=</span> <span class="s2">&#34;COUNT&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="n">requiresField</span> <span class="p">=</span> <span class="vm">$false</span>
</span></span><span class="line"><span class="cl">          <span class="n">numericOnly</span> <span class="p">=</span> <span class="vm">$false</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="n">piqlFunctionField</span> <span class="p">=</span> <span class="vm">$null</span>
</span></span><span class="line"><span class="cl">      <span class="n">fieldConstraints</span> <span class="p">=</span> <span class="vm">@</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="vm">@</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="n">internalName</span> <span class="p">=</span> <span class="s2">&#34;appname&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="n">operator</span> <span class="p">=</span> <span class="s2">&#34;STARTS_WITH&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="n">value</span> <span class="p">=</span> <span class="nv">$appname</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="vm">@</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="n">internalName</span> <span class="p">=</span> <span class="s2">&#34;text&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="n">operator</span> <span class="p">=</span> <span class="s2">&#34;CONTAINS&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="n">value</span> <span class="p">=</span> <span class="nv">$text</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="vm">@</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="n">internalName</span> <span class="p">=</span> <span class="s2">&#34;vmw_esxi_vm_name&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="n">operator</span> <span class="p">=</span> <span class="s2">&#34;CONTAINS&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="n">value</span> <span class="p">=</span> <span class="nv">$vmwEsxiVmName</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="n">supplementalConstraints</span> <span class="p">=</span> <span class="vm">@</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="n">groupByFields</span> <span class="p">=</span> <span class="vm">@</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="n">contentPacksToIncludeFields</span> <span class="p">=</span> <span class="vm">@</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="n">extractedFields</span> <span class="p">=</span> <span class="vm">@</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Convert the object to JSON</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$jsonString</span> <span class="p">=</span> <span class="nv">$jsonObject</span> <span class="p">|</span> <span class="nb">ConvertTo-Json</span> <span class="n">-Compress</span> <span class="n">-Depth</span> <span class="mf">10</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># URL encode the JSON string</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$encodedJson</span> <span class="p">=</span> <span class="p">[</span><span class="no">System.Web.HttpUtility</span><span class="p">]::</span><span class="n">UrlEncode</span><span class="p">(</span><span class="nv">$jsonString</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Chart options (URL encoded)</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$chartOptions</span> <span class="p">=</span> <span class="s2">&#34;%7B%22logaxis%22%3Afalse%2C%22trendline%22%3Afalse%2C%22spline%22%3Afalse%7D&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Construct the final URL</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$global:finalUrl</span> <span class="p">=</span> <span class="nv">$baseUrl</span> <span class="p">+</span> <span class="nv">$encodedJson</span> <span class="p">+</span> <span class="s2">&#34;&amp;chartOptions=&#34;</span> <span class="p">+</span> <span class="nv">$chartOptions</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Output the final URL</span>
</span></span><span class="line"><span class="cl">  <span class="c">#$global:finalUrl</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">Set-Clipboard</span> <span class="nv">$global:finalUrl</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c"># End Function</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Call Function to build Filter URL Example</span>
</span></span><span class="line"><span class="cl"><span class="c">#$vmName = &#34;vcrocs-w2k22-02&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c">#set-filterURL -vmwEsxiVmName $vmName</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Open URL in default browser</span>
</span></span><span class="line"><span class="cl"><span class="c">#Start-Process $global:finalUrl</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>Automation Script Example:</p>
<ul>
<li>Shows how to use the (3) Functions in the example code above</li>
</ul>
<p><small><span style="color: red; font-weight: bold;">Click arrow to expand the code:</span></small></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Load the Create Events, Create URL and Send Email functions script, which will be used for logging events via Aria Operations for Logs API.</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span> <span class="p">/</span><span class="nb">Path-to</span><span class="n">-Script</span><span class="p">/</span><span class="nb">aria-operations</span><span class="n">-for-logs-syslog-api</span><span class="p">.</span><span class="py">ps1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Define the VM name and the script process description</span>
</span></span><span class="line"><span class="cl"><span class="nv">$vmName</span> <span class="p">=</span> <span class="s2">&#34;vCROCS-W2K22-06&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$scriptProcess</span> <span class="p">=</span> <span class="s2">&#34;VM Build: &#34;</span> <span class="p">+</span> <span class="nv">$vmName</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># --- Connect to vCenter ---</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Define the parameters for connecting to the vCenter Server</span>
</span></span><span class="line"><span class="cl"><span class="nv">$ConnectVIServerParams</span> <span class="p">=</span> <span class="vm">@</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Server</span>   <span class="p">=</span> <span class="s1">&#39;192.168.6.100&#39;</span>              <span class="c"># vCenter Server IP or FQDN</span>
</span></span><span class="line"><span class="cl">    <span class="n">User</span>     <span class="p">=</span> <span class="s1">&#39;administrator@vcrocs.local&#39;</span> <span class="c"># vCenter Admin Username</span>
</span></span><span class="line"><span class="cl">    <span class="n">Password</span> <span class="p">=</span> <span class="s1">&#39;VMware1!&#39;</span>                   <span class="c"># vCenter Admin Password</span>
</span></span><span class="line"><span class="cl">    <span class="n">Protocol</span> <span class="p">=</span> <span class="s1">&#39;https&#39;</span>                      <span class="c"># Secure Protocol</span>
</span></span><span class="line"><span class="cl">    <span class="n">Force</span>    <span class="p">=</span> <span class="vm">$true</span>                        <span class="c"># Force connection even if already connected</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Log the connection attempt to Aria Operations for Logs</span>
</span></span><span class="line"><span class="cl"><span class="nv">$text</span> <span class="p">=</span> <span class="nv">$scriptProcess</span> <span class="p">+</span> <span class="s2">&#34; - Connecting to vCenter Server: &#34;</span> <span class="p">+</span> <span class="nv">$ConnectVIServerParams</span><span class="p">.</span><span class="py">Server</span>
</span></span><span class="line"><span class="cl"><span class="nb">Send-ApiEvent</span> <span class="n">-text</span> <span class="nv">$text</span> <span class="n">-vmw_vcenter</span> <span class="nv">$ConnectVIServerParams</span><span class="p">.</span><span class="py">Server</span> <span class="n">-vmw_esxi_vm_name</span> <span class="nv">$vmName</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Establish the connection to vCenter</span>
</span></span><span class="line"><span class="cl"><span class="nv">$vCenterConnect</span> <span class="p">=</span> <span class="nb">Connect-VIServer</span> <span class="nv">@ConnectVIServerParams</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Log successful connection status to Aria Operations for Logs</span>
</span></span><span class="line"><span class="cl"><span class="nv">$text</span> <span class="p">=</span> <span class="nv">$scriptProcess</span> <span class="p">+</span> <span class="s2">&#34; - Connection to vCenter Server: &#34;</span> <span class="p">+</span> <span class="nv">$ConnectVIServerParams</span><span class="p">.</span><span class="py">Server</span> <span class="p">+</span> <span class="s2">&#34; Successful: &#34;</span> <span class="p">+</span> <span class="nv">$vCenterConnect</span><span class="p">.</span><span class="py">IsConnected</span>
</span></span><span class="line"><span class="cl"><span class="nb">Send-ApiEvent</span> <span class="n">-text</span> <span class="nv">$text</span> <span class="n">-vmw_vcenter</span> <span class="nv">$ConnectVIServerParams</span><span class="p">.</span><span class="py">Server</span> <span class="n">-vmw_esxi_vm_name</span> <span class="nv">$vmName</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># --- Add Your VM Build Steps Here ---</span>
</span></span><span class="line"><span class="cl"><span class="c"># Insert your VM build process code below. This section is a placeholder for any actions you will take on the VM during the build.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Example Log Event - Add specific operations during VM build (e.g., software installation, configuration, etc.)</span>
</span></span><span class="line"><span class="cl"><span class="nv">$text</span> <span class="p">=</span> <span class="nv">$scriptProcess</span> <span class="p">+</span> <span class="s2">&#34; - Installing VCF Operations for Logs Agent&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">Send-ApiEvent</span> <span class="n">-text</span> <span class="nv">$text</span> <span class="n">-vmw_vcenter</span> <span class="nv">$ConnectVIServerParams</span><span class="p">.</span><span class="py">Server</span> <span class="n">-vmw_esxi_vm_name</span> <span class="nv">$vmName</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># --- Disconnect from vCenter ---</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Log the disconnection attempt from vCenter</span>
</span></span><span class="line"><span class="cl"><span class="nv">$text</span> <span class="p">=</span> <span class="nv">$scriptProcess</span> <span class="p">+</span> <span class="s2">&#34; - Disconnecting from vCenter Server&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">Send-ApiEvent</span> <span class="n">-text</span> <span class="nv">$text</span> <span class="n">-vmw_vcenter</span> <span class="nv">$ConnectVIServerParams</span><span class="p">.</span><span class="py">Server</span> <span class="n">-vmw_esxi_vm_name</span> <span class="nv">$vmName</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Disconnect from the vCenter Server without confirmation prompts</span>
</span></span><span class="line"><span class="cl"><span class="nb">Disconnect-VIServer</span> <span class="n">-Server</span> <span class="nv">$ConnectVIServerParams</span><span class="p">.</span><span class="py">Server</span> <span class="n">-Confirm:</span><span class="vm">$false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Call Function to build Filter URL</span>
</span></span><span class="line"><span class="cl"><span class="nb">set-filterURL</span> <span class="n">-vmwEsxiVmName</span> <span class="nv">$vmName</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Example usage of the email function</span>
</span></span><span class="line"><span class="cl"><span class="nb">Send-ServerBuildEmail</span> <span class="n">-toEmail</span> <span class="s2">&#34;dale.hassinger@vcrocs.info&#34;</span> <span class="n">-vmName</span> <span class="nv">$vmName</span> <span class="n">-finalUrl</span> <span class="nv">$Global:finalUrl</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> 
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h6 id="screen-shots">Screen Shots:</h6>
<p><small>Screen Shot of the VCF Operations for Logs - Filter query and results:</small></p>
<figure><a class="lightgallery" href="/vcf-operations-for-logs-filter-url-notifcation/logs-url-01.png" title="/vcf-operations-for-logs-filter-url-notifcation/logs-url-01.png" data-thumbnail="/vcf-operations-for-logs-filter-url-notifcation/logs-url-01.png" data-sub-html="<h2>Click to see Larger Image of Screen Shot</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/vcf-operations-for-logs-filter-url-notifcation/logs-url-01.png"
            data-srcset="/vcf-operations-for-logs-filter-url-notifcation/logs-url-01.png, /vcf-operations-for-logs-filter-url-notifcation/logs-url-01.png 1.5x, /vcf-operations-for-logs-filter-url-notifcation/logs-url-01.png 2x"
            data-sizes="auto"
            alt="/vcf-operations-for-logs-filter-url-notifcation/logs-url-01.png" width="3410" height="1836" />
    </a><figcaption class="image-caption">Click to see Larger Image of Screen Shot</figcaption>
    </figure>
<hr>
<p><small>Screen Shot of the Email with a VCF Operations Log link included:</small></p>
<figure><a class="lightgallery" href="/vcf-operations-for-logs-filter-url-notifcation/logs-url-02.png" title="/vcf-operations-for-logs-filter-url-notifcation/logs-url-02.png" data-thumbnail="/vcf-operations-for-logs-filter-url-notifcation/logs-url-02.png" data-sub-html="<h2>Click to see Larger Image of Screen Shot</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/vcf-operations-for-logs-filter-url-notifcation/logs-url-02.png"
            data-srcset="/vcf-operations-for-logs-filter-url-notifcation/logs-url-02.png, /vcf-operations-for-logs-filter-url-notifcation/logs-url-02.png 1.5x, /vcf-operations-for-logs-filter-url-notifcation/logs-url-02.png 2x"
            data-sizes="auto"
            alt="/vcf-operations-for-logs-filter-url-notifcation/logs-url-02.png" width="1862" height="802" />
    </a><figcaption class="image-caption">Click to see Larger Image of Screen Shot</figcaption>
    </figure>
<hr>
<p><small>Screen Shot of the Email on a mobile device with a VCF Operations Log link included:</small></p>
<figure><a class="lightgallery" href="/vcf-operations-for-logs-filter-url-notifcation/logs-url-03.png" title="/vcf-operations-for-logs-filter-url-notifcation/logs-url-03.png" data-thumbnail="/vcf-operations-for-logs-filter-url-notifcation/logs-url-03.png" data-sub-html="<h2>Click to see Larger Image of Screen Shot</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/vcf-operations-for-logs-filter-url-notifcation/logs-url-03.png"
            data-srcset="/vcf-operations-for-logs-filter-url-notifcation/logs-url-03.png, /vcf-operations-for-logs-filter-url-notifcation/logs-url-03.png 1.5x, /vcf-operations-for-logs-filter-url-notifcation/logs-url-03.png 2x"
            data-sizes="auto"
            alt="/vcf-operations-for-logs-filter-url-notifcation/logs-url-03.png" width="1284" height="1125" />
    </a><figcaption class="image-caption">Click to see Larger Image of Screen Shot</figcaption>
    </figure>
<hr>
<h6 id="lessons-learned">Lessons Learned:</h6>
<ul>
<li>VCF Operations for Logs is an excellent syslog solution, offering intuitive and user-friendly filtering tools.</li>
<li>Always format events in a way that simplifies the creation of filters.</li>
<li>Generating the VCF Operations Log URL link makes filtering and viewing events very easy.</li>
</ul>
<hr>
<h6 id="links-to-resources-discussed-is-this-blog-post">Links to resources discussed is this Blog Post:</h6>
<ul>
<li><a href="https://docs.vmware.com/en/VMware-Aria-Operations-for-Logs/index.html" target="_blank" rel="noopener noreffer ">VCF Operations for Logs - Official Documentation</a></li>
</ul>
<hr>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>vCROCS Deep Dive Podcast<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>I created a Google NotebookLM Podcast based on the content of this blog. While it may not be entirely accurate, is any podcast ever 100% perfect, even when real people are speaking? Take a moment to listen and share your thoughts with me!</p>
<p><a href="https://www.youtube.com/watch?v=Vb3DyBz57PQ" target="_blank" rel="noopener noreffer ">vCROCS Deep Dive Podcast | VCF Operations for Logs | How to create URL for Filtering Results</a></p>
</div>
        </div>
    </div>
<hr>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw" aria-hidden="true"></i>Info<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">In my blogs, I often emphasize that there are multiple methods to achieve the same objective. This article presents just one of the many ways you can tackle this task. I&rsquo;ve shared what I believe to be an effective approach for this particular use case, but keep in mind that every organization and environment varies. There&rsquo;s no definitive right or wrong way to accomplish the tasks discussed in this article.</div>
        </div>
    </div>
<hr>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw" aria-hidden="true"></i>Lab<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Always test new setups and processes, like those discussed in this blog, in a lab environment before implementing them in a production environment.</div>
        </div>
    </div>
<hr>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Tips and Tricks<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">If you found this blog article helpful and it assisted you, consider buying me a coffee to kickstart my day.</div>
        </div>
    </div>
<center>
<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="dalehassinger" data-color="#FFDD00" data-emoji=""  data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>
</center>
<hr>
<div style="font-weight: bold;">Comments:</div>
<div style="height: 20px;"></div>
<div
  id="cusdis_thread"
  data-host="https://cusdis.com"
  data-app-id="c49f7fae-719b-4753-a518-a57e5321d7c1"
  data-page-id="posts/vcf-operations-for-logs-filter-url-notifcation/index.en.md"
  data-page-url="https://www.vcrocs.info/vcf-operations-for-logs-filter-url-notifcation/"
  data-page-title="VCF Operations for Logs | How to Automate URL Generation for Filtering Results"
></div>
<script async defer src="https://cusdis.com/js/cusdis.es.js"></script></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2024-10-21</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://www.vcrocs.info/vcf-operations-for-logs-filter-url-notifcation/" data-title="VCF Operations for Logs | How to Automate URL Generation for Filtering Results" data-via="dalehassinger" data-hashtags="VCF,Automation,Deployments,Operations,syslog,PowerShell"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://www.vcrocs.info/vcf-operations-for-logs-filter-url-notifcation/" data-hashtag="VCF"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://www.vcrocs.info/vcf-operations-for-logs-filter-url-notifcation/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/vcf/">VCF</a>,&nbsp;<a href="/tags/automation/">Automation</a>,&nbsp;<a href="/tags/deployments/">Deployments</a>,&nbsp;<a href="/tags/operations/">Operations</a>,&nbsp;<a href="/tags/syslog/">Syslog</a>,&nbsp;<a href="/tags/powershell/">PowerShell</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/vcf-operations-for-logs-syslog-api/" class="prev" rel="prev" title="VCF Operations for Logs | How to use with Automation Scripts"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>VCF Operations for Logs | How to use with Automation Scripts</a>
            <a href="/vcf-operations-dashboard-samples/" class="next" rel="next" title="VCF Operations | Ideas for Practical and Effective Dashboards">VCF Operations | Ideas for Practical and Effective Dashboards<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Designed | Developed By vCROCS</div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://www.vcrocs.info" target="_blank">Dale Hassinger</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://www.vCROCS.info" target="_blank">www.vCROCS.info</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"lightgallery":true,"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-KSLC6FHF36');
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-KSLC6FHF36" async></script></body>
</html>
