<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>VMware vRealize SaltStack Config as a Windows Server Admin - Part 4 - vCROCS</title><meta name="Description" content="Hugo theme - LoveIt"><meta property="og:title" content="VMware vRealize SaltStack Config as a Windows Server Admin - Part 4" />
<meta property="og:description" content="Part 4: How to use SaltStack Config with Windows Server and PowerShell" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dalehassinger.github.io/hugo-loveit/saltstack-config-part-04/" /><meta property="og:image" content="https://dalehassinger.github.io/hugo-loveit/saltstack-config-part-04/featured-image.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-01-15T22:11:05-05:00" /><meta property="og:site_name" content="vCROCS" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://dalehassinger.github.io/hugo-loveit/saltstack-config-part-04/featured-image.png"/>
<meta name="twitter:title" content="VMware vRealize SaltStack Config as a Windows Server Admin - Part 4"/>
<meta name="twitter:description" content="Part 4: How to use SaltStack Config with Windows Server and PowerShell"/>
<meta name="application-name" content="vCROCS">
<meta name="apple-mobile-web-app-title" content="vCROCS"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://dalehassinger.github.io/hugo-loveit/saltstack-config-part-04/" /><link rel="prev" href="https://dalehassinger.github.io/hugo-loveit/saltstack-config-part-03/" /><link rel="next" href="https://dalehassinger.github.io/hugo-loveit/saltstack-config-part-05/" /><link rel="stylesheet" href="/hugo-loveit/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "VMware vRealize SaltStack Config as a Windows Server Admin - Part 4",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/dalehassinger.github.io\/hugo-loveit\/saltstack-config-part-04\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/dalehassinger.github.io\/hugo-loveit\/saltstack-config-part-04\/featured-image.png",
                            "width":  1420 ,
                            "height":  708 
                        }],"genre": "posts","keywords": "SaltStack Config, VMware Aria Automation, vRealize Automation, PowerShell, Windows Server, Configuration Management, Grains","wordcount":  1359 ,
        "url": "https:\/\/dalehassinger.github.io\/hugo-loveit\/saltstack-config-part-04\/","datePublished": "2021-09-05T00:00:00+00:00","dateModified": "2023-01-15T22:11:05-05:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/dalehassinger.github.io\/hugo-loveit\/images\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "Dale Hassinger"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/hugo-loveit/" title="vCROCS"><span class="header-title-pre"><i class='far fa-house fa-solid'></i></span>vCROCS</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/hugo-loveit/about/"><i class='fab fa-address-card fa-regular' aria-hidden='true'></i>  - About </a><a class="menu-item" href="/hugo-loveit/posts/"><i class='fab fa-blog fa-solid' aria-hidden='true'></i>  - Posts </a><a class="menu-item" href="/hugo-loveit/tags/"><i class='fab fa-tag fa-solid' aria-hidden='true'></i>  - Tags </a><a class="menu-item" href="/hugo-loveit/categories/"><i class='fab fa-pen-to-square fa-solid' aria-hidden='true'></i>  - Categories </a><a class="menu-item" href="/hugo-loveit/links/"><i class='fab fa-bookmark fa-regular' aria-hidden='true'></i>  - Links </a><a class="menu-item" href="/hugo-loveit/pics/"><i class='fab fa-image fa-regular' aria-hidden='true'></i>  - Pics </a><a class="menu-item" href="https://twitter.com/dalehassinger" title="Twitter" rel="noopener noreffer" target="_blank"><i class='fab fa-twitter fa-fw' aria-hidden='true'></i>  - Twitter </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/hugo-loveit/" title="vCROCS"><span class="header-title-pre"><i class='far fa-house fa-solid'></i></span>vCROCS</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/hugo-loveit/about/" title=""><i class='fab fa-address-card fa-regular' aria-hidden='true'></i> - About</a><a class="menu-item" href="/hugo-loveit/posts/" title=""><i class='fab fa-blog fa-solid' aria-hidden='true'></i> - Posts</a><a class="menu-item" href="/hugo-loveit/tags/" title=""><i class='fab fa-tag fa-solid' aria-hidden='true'></i> - Tags</a><a class="menu-item" href="/hugo-loveit/categories/" title=""><i class='fab fa-pen-to-square fa-solid' aria-hidden='true'></i> - Categories</a><a class="menu-item" href="/hugo-loveit/links/" title=""><i class='fab fa-bookmark fa-regular' aria-hidden='true'></i> - Links</a><a class="menu-item" href="/hugo-loveit/pics/" title=""><i class='fab fa-image fa-regular' aria-hidden='true'></i> - Pics</a><a class="menu-item" href="https://twitter.com/dalehassinger" title="Twitter" rel="noopener noreffer" target="_blank"><i class='fab fa-twitter fa-fw' aria-hidden='true'></i> - Twitter</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">VMware vRealize SaltStack Config as a Windows Server Admin - Part 4</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://twitter.com/dalehassinger" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Dale Hassinger</a></span>&nbsp;<span class="post-category">included in <a href="/hugo-loveit/categories/saltstack-config/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>SaltStack Config</a>&nbsp;<a href="/hugo-loveit/categories/vmware-aria/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>VMware Aria</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2021-09-05">2021-09-05</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1359 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;7 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/hugo-loveit/svg/loading.min.svg"
        data-src="/hugo-loveit/saltstack-config-part-04/featured-image.png"
        data-srcset="/hugo-loveit/saltstack-config-part-04/featured-image.png, /hugo-loveit/saltstack-config-part-04/featured-image.png 1.5x, /hugo-loveit/saltstack-config-part-04/featured-image.png 2x"
        data-sizes="auto"
        alt="/hugo-loveit/saltstack-config-part-04/featured-image.png"
        title="/hugo-loveit/saltstack-config-part-04/featured-image.png" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li>
              <ul>
                <li>
                  <ul>
                    <li><a href="#grains-file">Grains File:</a></li>
                    <li><a href="#example-grains-file">Example grains file:</a></li>
                    <li><a href="#saltstack-config-targets">SaltStack Config Targets:</a></li>
                    <li><a href="#saltstack-config-targets-1">SaltStack Config Targets:</a></li>
                    <li><a href="#saltstack-config-target-definition">SaltStack Config Target Definition:</a></li>
                    <li><a href="#how-to-add-the-vcenter-tags-to-the-grains-file-on-all-your-vms-in-saltstack-config">How to add the vCenter TAGs to the grains file on all your VMs in SaltStack Config:</a></li>
                    <li><a href="#step-1-get-the-vm-names-and-all-assigned-vcenter-tags-into-a-csv-file">Step 1: Get the VM Names and All Assigned vCenter TAGs into a csv file</a></li>
                    <li><a href="#step-2-copy-the-csv-file-to-the-salt-master">Step 2: Copy the csv file to the salt master</a></li>
                    <li><a href="#step-3-copy-the-csv-file-to-the-salt-minions">Step 3: Copy the csv file to the salt minions</a></li>
                    <li><a href="#job-to-copy-csv-file-to-minions">Job to copy csv file to minions:</a></li>
                    <li><a href="#step-4-run-script-on-minion">Step 4: Run Script on minion</a></li>
                    <li><a href="#job-to-run-a-powershell-script-to-createupdate-the-grains-file">Job to run a PowerShell Script to create/update the grains file:</a></li>
                    <li><a href="#step-5-run-job-to-do-a-sync_grains">Step 5: Run job to do a sync_grains</a></li>
                    <li><a href="#job-to-run-sync-of-the-minion-grains-information">Job to run sync of the minion grains information:</a></li>
                    <li><a href="#saltstack-config-orchestration">SaltStack Config Orchestration:</a></li>
                    <li><a href="#job-to-orchestrate-all-the-steps">Job to Orchestrate all the steps:</a></li>
                    <li><a href="#salt-run-job-to-orchestrate-copy-filerun-scriptrun-syncdelete-file">Salt-Run Job to Orchestrate Copy File/Run Script/Run Sync/Delete File:</a></li>
                    <li><a href="#lessons-learned">Lessons Learned:</a></li>
                    <li><a href="#salt-links-i-found-to-be-very-helpful">Salt Links I found to be very helpful:</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p><strong>Part 4: How to use SaltStack Config with Windows Server and PowerShell</strong></p>
<hr>
<p>The latest item on my journey with <strong>VMware vRealize SaltStack Config</strong> as a <strong>Windows Server Admin</strong> will be salt grains. I have a specific use case that made me start looking at grains. In VMware vCenter I use vCenter TAGs to organize VMs. I also use vCenter TAGs to organize VMs in vRealize Operations.  I want to use the same logic of using vCenter TAGs in SaltStack Config. SaltStack Config does not use vCenter TAGs OOTB (Out of the Box) for VMs.</p>
<p>At the end of this Blog Post I also have an SaltStack Config Orchestration example.  Instead of running multiple Jobs one at a time I have (4) steps in a SLS file that I run using a salt-run job and the function state.orchestrate.</p>
<hr>
<h6 id="grains-file">Grains File:</h6>
<p>This is what I learned about salt grains when using with a Windows OS.</p>
<ul>
<li>The default location of the grains file is in directory &ldquo;C:\salt\conf&quot;.</li>
<li>The grains file is named grains with no extension.</li>
</ul>
<h6 id="example-grains-file">Example grains file:</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">vCenterTags</span><span class="err">:</span> <span class="nb">TAG-VM</span><span class="n">-vCROCS</span><span class="p">|</span><span class="nb">TAG-VM</span><span class="n">-WebServer</span><span class="p">|</span><span class="nb">TAG-App</span><span class="n">-Hugo</span></span></span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>&ldquo;Grain Name&rdquo;: &ldquo;The value of the grain&rdquo;.</li>
<li>In my example I wanted the grain to be named &ldquo;vCenterTags&rdquo; and the values will be the vCenter TAG names &ldquo;TAG-VM-vCROCS|TAG-VM-WebServer|TAG-App-Hugo&rdquo;. I have (3) vCenter TAGs assigned to this VM.  I will be able to create a SaltStack Config Target based on any of the TAGs.</li>
</ul>
<hr>
<h6 id="saltstack-config-targets">SaltStack Config Targets:</h6>
<p>When I add the vCenter TAG information to the grains file I am then able to create SaltStack Config Targets based on the grain &ldquo;vCenterTags&rdquo;.</p>
<h6 id="saltstack-config-targets-1">SaltStack Config Targets:</h6>
<figure><a class="lightgallery" href="/hugo-loveit/saltstack-config-part-04/Salt-42.PNG" title="/hugo-loveit/saltstack-config-part-04/Salt-42.PNG" data-thumbnail="/hugo-loveit/saltstack-config-part-04/Salt-42.PNG" data-sub-html="<h2>Click to see Larger Image</h2>">
        <img
            class="lazyload"
            src="/hugo-loveit/svg/loading.min.svg"
            data-src="/hugo-loveit/saltstack-config-part-04/Salt-42.PNG"
            data-srcset="/hugo-loveit/saltstack-config-part-04/Salt-42.PNG, /hugo-loveit/saltstack-config-part-04/Salt-42.PNG 1.5x, /hugo-loveit/saltstack-config-part-04/Salt-42.PNG 2x"
            data-sizes="auto"
            alt="/hugo-loveit/saltstack-config-part-04/Salt-42.PNG" width="1644" height="517" />
    </a><figcaption class="image-caption">Click to see Larger Image</figcaption>
    </figure>
<h6 id="saltstack-config-target-definition">SaltStack Config Target Definition:</h6>
<figure><a class="lightgallery" href="/hugo-loveit/saltstack-config-part-04/Salt-41.PNG" title="/hugo-loveit/saltstack-config-part-04/Salt-41.PNG" data-thumbnail="/hugo-loveit/saltstack-config-part-04/Salt-41.PNG" data-sub-html="<h2>Click to see Larger Image</h2>">
        <img
            class="lazyload"
            src="/hugo-loveit/svg/loading.min.svg"
            data-src="/hugo-loveit/saltstack-config-part-04/Salt-41.PNG"
            data-srcset="/hugo-loveit/saltstack-config-part-04/Salt-41.PNG, /hugo-loveit/saltstack-config-part-04/Salt-41.PNG 1.5x, /hugo-loveit/saltstack-config-part-04/Salt-41.PNG 2x"
            data-sizes="auto"
            alt="/hugo-loveit/saltstack-config-part-04/Salt-41.PNG" width="867" height="517" />
    </a><figcaption class="image-caption">Click to see Larger Image</figcaption>
    </figure>
<h6 id="how-to-add-the-vcenter-tags-to-the-grains-file-on-all-your-vms-in-saltstack-config">How to add the vCenter TAGs to the grains file on all your VMs in SaltStack Config:</h6>
<h6 id="step-1-get-the-vm-names-and-all-assigned-vcenter-tags-into-a-csv-file">Step 1: Get the VM Names and All Assigned vCenter TAGs into a csv file</h6>
<p>Example PowerShell Code to get all vCenter VM Names and all vCenter TAGs assigned to the VMs<br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="c"># ----- [ Start Create CSV File with all VMs/TAGs Assigned ] ----------------------------</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># I did not include code to connect to the vCenter. There are many ways to do this step.</span>
</span></span><span class="line"><span class="cl"><span class="c"># Make sure you are connected to the vCenter BEFORE running this code.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$allvmstaginfoFile</span> <span class="p">=</span> <span class="s2">&#34;C:\Salt\allvmstaginfo.csv&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Create Array</span>
</span></span><span class="line"><span class="cl"><span class="nv">$allVMsTagInfo</span> <span class="p">=</span> <span class="vm">@</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Add Headers to Array</span>
</span></span><span class="line"><span class="cl"><span class="nv">$VMTagInfo</span> <span class="p">=</span> <span class="s1">&#39;VM,TAGs&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$allVMsTagInfo</span> <span class="p">+=</span> <span class="nv">$VMTagInfo</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Get All VMs in you vCenter</span>
</span></span><span class="line"><span class="cl"><span class="nv">$vmNames</span> <span class="p">=</span> <span class="nb">Get-VM</span>
</span></span><span class="line"><span class="cl"><span class="nv">$vmNames</span> <span class="p">=</span> <span class="nv">$vmNames</span> <span class="p">|</span> <span class="nb">Sort-Object</span> <span class="n">Name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">foreach</span><span class="p">(</span><span class="nv">$vmName</span> <span class="k">in</span> <span class="nv">$VMNames</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="c"># Get VM Tag(s)</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$VMTags</span> <span class="p">=</span> <span class="nb">Get-TagAssignment</span> <span class="n">-Entity</span> <span class="nv">$vmName</span><span class="p">.</span><span class="py">Name</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c"># If more than (1) TAG I will join them as a string with a &#39;|&#39; separating the values.</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$VMtags</span> <span class="p">=</span> <span class="nv">$VMTags</span><span class="p">.</span><span class="py">Tag</span><span class="p">.</span><span class="py">Name</span> <span class="n">-join</span> <span class="s1">&#39;|&#39;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c"># Create a string with the VMname and all the vCenter TAGs assigned separated by a comma</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$VMTagInfo</span> <span class="p">=</span> <span class="nv">$vmName</span><span class="p">.</span><span class="py">Name</span> <span class="p">+</span> <span class="s1">&#39;,&#39;</span> <span class="p">+</span> <span class="nv">$VMTags</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c"># Add Info to array  </span>
</span></span><span class="line"><span class="cl">  <span class="nv">$allVMsTagInfo</span> <span class="p">+=</span> <span class="nv">$VMTagInfo</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c"># End Foreach</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Delete existing all VMs Tag csv File</span>
</span></span><span class="line"><span class="cl"><span class="nb">Remove-Item</span> <span class="n">-Path</span> <span class="nv">$allvmstaginfoFile</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Create new all VMs Tag csv File</span>
</span></span><span class="line"><span class="cl"><span class="nb">New-Item</span> <span class="nv">$allvmstaginfoFile</span> <span class="n">-ItemType</span> <span class="n">File</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Add array Data to CSV file</span>
</span></span><span class="line"><span class="cl"><span class="nv">$allVMsTagInfo</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">-Skip</span> <span class="mf">1</span> <span class="p">|</span> <span class="nb">Set-Content</span> <span class="nv">$allvmstaginfoFile</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># ----- [ End Create CSV File with all VMs/TAGs Assigned ] ----------------------------</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
<h6 id="step-2-copy-the-csv-file-to-the-salt-master">Step 2: Copy the csv file to the salt master</h6>
<p>After I create the csv file I copy to the StackStack Config Server (Salt Master) in the folder /var/srv/salt.  This is where all files need to be saved when you use function cp.get_file.</p>
<hr>
<h6 id="step-3-copy-the-csv-file-to-the-salt-minions">Step 3: Copy the csv file to the salt minions</h6>
<p>You may be wondering why I copy the file to the minion and not copy to a central share. My environment has NSX-T with zero trust. Most of my automation I do not open ports to servers that are not needed permanently. So the concept of using salt to copy files to minions, use the files to make changes and then delete the files when processes are complete works well in a zero trust environment.</p>
<h6 id="job-to-copy-csv-file-to-minions">Job to copy csv file to minions:</h6>
<figure><a class="lightgallery" href="/hugo-loveit/saltstack-config-part-04/Salt-43.PNG" title="/hugo-loveit/saltstack-config-part-04/Salt-43.PNG" data-thumbnail="/hugo-loveit/saltstack-config-part-04/Salt-43.PNG" data-sub-html="<h2>Click to see Larger Image</h2>">
        <img
            class="lazyload"
            src="/hugo-loveit/svg/loading.min.svg"
            data-src="/hugo-loveit/saltstack-config-part-04/Salt-43.PNG"
            data-srcset="/hugo-loveit/saltstack-config-part-04/Salt-43.PNG, /hugo-loveit/saltstack-config-part-04/Salt-43.PNG 1.5x, /hugo-loveit/saltstack-config-part-04/Salt-43.PNG 2x"
            data-sizes="auto"
            alt="/hugo-loveit/saltstack-config-part-04/Salt-43.PNG" width="1294" height="805" />
    </a><figcaption class="image-caption">Click to see Larger Image</figcaption>
    </figure>
<hr>
<h6 id="step-4-run-script-on-minion">Step 4: Run Script on minion</h6>
<p>After I copy the csv file to the minion I run a script to create/update the grains files.</p>
<h6 id="job-to-run-a-powershell-script-to-createupdate-the-grains-file">Job to run a PowerShell Script to create/update the grains file:</h6>
<figure><a class="lightgallery" href="/hugo-loveit/saltstack-config-part-04/Salt-44.PNG" title="/hugo-loveit/saltstack-config-part-04/Salt-44.PNG" data-thumbnail="/hugo-loveit/saltstack-config-part-04/Salt-44.PNG" data-sub-html="<h2>Click to see Larger Image</h2>">
        <img
            class="lazyload"
            src="/hugo-loveit/svg/loading.min.svg"
            data-src="/hugo-loveit/saltstack-config-part-04/Salt-44.PNG"
            data-srcset="/hugo-loveit/saltstack-config-part-04/Salt-44.PNG, /hugo-loveit/saltstack-config-part-04/Salt-44.PNG 1.5x, /hugo-loveit/saltstack-config-part-04/Salt-44.PNG 2x"
            data-sizes="auto"
            alt="/hugo-loveit/saltstack-config-part-04/Salt-44.PNG" width="1294" height="805" />
    </a><figcaption class="image-caption">Click to see Larger Image</figcaption>
    </figure>
<p>Example PowerShell Code to create/update grains file on a minion:<br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="c"># ----- [ Start Create Grain File with TAGs Assigned ] ----------------------------</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$allvmstaginfoFile</span> <span class="p">=</span> <span class="s2">&#34;C:\vCROCS\allvmstaginfo.csv&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$grainTagInfo</span> <span class="p">=</span> <span class="nb">Import-Csv</span> <span class="nv">$allvmstaginfoFile</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$vmName</span> <span class="p">=</span> <span class="n">hostname</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$grainsFile</span> <span class="p">=</span> <span class="s2">&#34;C:\salt\conf\grains&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nb">Test-Path</span> <span class="nv">$grainsFile</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c"># Remove existing vCenter Tags</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$grainsContent</span> <span class="p">=</span> <span class="nb">Get-Content</span> <span class="nv">$grainsFile</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$grainsContent</span> <span class="p">=</span> <span class="nv">$grainsContent</span> <span class="p">|</span> <span class="nb">Where-Object</span> <span class="p">{</span><span class="nv">$_</span> <span class="o">-notmatch</span> <span class="s2">&#34;vCenterTags:&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c"># If Only grain is vCenter Tags then Delete the grains file and re-create</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(!</span><span class="nv">$grainsContent</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nb">Remove-Item</span> <span class="n">-Path</span> <span class="nv">$grainsFile</span>
</span></span><span class="line"><span class="cl">        <span class="nb">New-Item</span> <span class="nv">$grainsFile</span> <span class="n">-ItemType</span> <span class="n">File</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="c"># End If</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$grainsContent</span> <span class="p">|</span> <span class="nb">Set-Content</span> <span class="nv">$grainsFile</span> <span class="n">-Force</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="c"># End Else</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">#Get VM Tag(s)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$grainfileinfo</span> <span class="p">=</span> <span class="nv">$grainTagInfo</span> <span class="p">|</span> <span class="nb">Where-Object</span> <span class="p">{</span><span class="nv">$_</span><span class="p">.</span><span class="py">VM</span> <span class="o">-eq</span> <span class="nv">$vmName</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nv">$VMTagInfo</span> <span class="p">=</span> <span class="s1">&#39;vCenterTags: &#39;</span> <span class="p">+</span> <span class="nv">$grainfileinfo</span><span class="p">.</span><span class="py">TAGs</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">Add-Content</span> <span class="nv">$grainsFile</span> <span class="nv">$VMTagInfo</span> <span class="n">-Force</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c"># End If</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c"># Create grains file</span>
</span></span><span class="line"><span class="cl">    <span class="nb">New-Item</span> <span class="nv">$grainsFile</span> <span class="n">-ItemType</span> <span class="n">File</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">#Get VM Tag(s)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$grainfileinfo</span> <span class="p">=</span> <span class="nv">$grainTagInfo</span> <span class="p">|</span> <span class="nb">Where-Object</span> <span class="p">{</span><span class="nv">$_</span><span class="p">.</span><span class="py">VM</span> <span class="o">-eq</span> <span class="nv">$vmName</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c"># Define Tags String</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$VMTagInfo</span> <span class="p">=</span> <span class="s1">&#39;vCenterTags: &#39;</span> <span class="p">+</span> <span class="nv">$grainfileinfo</span><span class="p">.</span><span class="py">TAGs</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c"># Add Tags to grains file</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Add-Content</span> <span class="nv">$grainsFile</span> <span class="nv">$VMTagInfo</span> <span class="n">-Force</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c"># End else</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># ----- [ End Create Grain File with TAGs Assigned ] ----------------------------</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
<hr>
<h6 id="step-5-run-job-to-do-a-sync_grains">Step 5: Run job to do a sync_grains</h6>
<p>Anytime you make any changes to the grains file you should run the function saltutil.sync_grains to update the SaltStack Config Server immediately.</p>
<h6 id="job-to-run-sync-of-the-minion-grains-information">Job to run sync of the minion grains information:</h6>
<figure><a class="lightgallery" href="/hugo-loveit/saltstack-config-part-04/Salt-45.PNG" title="/hugo-loveit/saltstack-config-part-04/Salt-45.PNG" data-thumbnail="/hugo-loveit/saltstack-config-part-04/Salt-45.PNG" data-sub-html="<h2>Click to see Larger Image</h2>">
        <img
            class="lazyload"
            src="/hugo-loveit/svg/loading.min.svg"
            data-src="/hugo-loveit/saltstack-config-part-04/Salt-45.PNG"
            data-srcset="/hugo-loveit/saltstack-config-part-04/Salt-45.PNG, /hugo-loveit/saltstack-config-part-04/Salt-45.PNG 1.5x, /hugo-loveit/saltstack-config-part-04/Salt-45.PNG 2x"
            data-sizes="auto"
            alt="/hugo-loveit/saltstack-config-part-04/Salt-45.PNG" width="1543" height="966" />
    </a><figcaption class="image-caption">Click to see Larger Image</figcaption>
    </figure>
<hr>
<h6 id="saltstack-config-orchestration">SaltStack Config Orchestration:</h6>
<h6 id="job-to-orchestrate-all-the-steps">Job to Orchestrate all the steps:</h6>
<ul>
<li>Copy file to minion.</li>
<li>Run script to create/update grains file</li>
<li>Run a sync_grains.</li>
<li>Delete the files from the minions when processes are complete.</li>
</ul>
<figure><a class="lightgallery" href="/hugo-loveit/saltstack-config-part-04/Salt-46.PNG" title="/hugo-loveit/saltstack-config-part-04/Salt-46.PNG" data-thumbnail="/hugo-loveit/saltstack-config-part-04/Salt-46.PNG" data-sub-html="<h2>Click to see Larger Image</h2>">
        <img
            class="lazyload"
            src="/hugo-loveit/svg/loading.min.svg"
            data-src="/hugo-loveit/saltstack-config-part-04/Salt-46.PNG"
            data-srcset="/hugo-loveit/saltstack-config-part-04/Salt-46.PNG, /hugo-loveit/saltstack-config-part-04/Salt-46.PNG 1.5x, /hugo-loveit/saltstack-config-part-04/Salt-46.PNG 2x"
            data-sizes="auto"
            alt="/hugo-loveit/saltstack-config-part-04/Salt-46.PNG" width="1543" height="805" />
    </a><figcaption class="image-caption">Click to see Larger Image</figcaption>
    </figure>
<p>Example Orchestration SLS file:
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">copy_tags</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">salt</span><span class="p">.</span><span class="n">function</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">name</span><span class="err">:</span> <span class="n">cp</span><span class="p">.</span><span class="py">get_file</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">tgt</span><span class="err">:</span> <span class="s1">&#39;os:Windows&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">tgt_type</span><span class="err">:</span> <span class="n">grain</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">arg</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">      <span class="p">-</span> <span class="s1">&#39;salt://allvmstaginfo.csv&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="p">-</span> <span class="s1">&#39;C:\vCROCS\allvmstaginfo.csv&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">create_grain_file</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">salt</span><span class="p">.</span><span class="n">function</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">name</span><span class="err">:</span> <span class="n">cmd</span><span class="p">.</span><span class="py">script</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">tgt</span><span class="err">:</span> <span class="s1">&#39;os:Windows&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">tgt_type</span><span class="err">:</span> <span class="n">grain</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">arg</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">      <span class="p">-</span> <span class="n">source</span><span class="p">=</span><span class="s2">&#34;salt://SEM/grains-vCenter-tags.ps1&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">-</span> <span class="n">shell</span><span class="p">=</span><span class="n">powershell</span>
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl"><span class="n">grain_sync</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">salt</span><span class="p">.</span><span class="n">function</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">name</span><span class="err">:</span> <span class="n">saltutil</span><span class="p">.</span><span class="py">sync_grains</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">tgt</span><span class="err">:</span> <span class="s1">&#39;os:Windows&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">tgt_type</span><span class="err">:</span> <span class="n">grain</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Cleanup_Tag_File</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">salt</span><span class="p">.</span><span class="n">function</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">name</span><span class="err">:</span> <span class="n">file</span><span class="p">.</span><span class="py">remove</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">tgt</span><span class="err">:</span> <span class="s1">&#39;os:Windows&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">tgt_type</span><span class="err">:</span> <span class="n">grain</span>
</span></span><span class="line"><span class="cl">    <span class="p">-</span> <span class="n">arg</span><span class="err">:</span>    
</span></span><span class="line"><span class="cl">      <span class="p">-</span> <span class="s1">&#39;C:\vCROCS\allvmstaginfo.csv&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
<h6 id="salt-run-job-to-orchestrate-copy-filerun-scriptrun-syncdelete-file">Salt-Run Job to Orchestrate Copy File/Run Script/Run Sync/Delete File:</h6>
<figure><a class="lightgallery" href="/hugo-loveit/saltstack-config-part-04/Salt-47.PNG" title="/hugo-loveit/saltstack-config-part-04/Salt-47.PNG" data-thumbnail="/hugo-loveit/saltstack-config-part-04/Salt-47.PNG" data-sub-html="<h2>Click to see Larger Image</h2>">
        <img
            class="lazyload"
            src="/hugo-loveit/svg/loading.min.svg"
            data-src="/hugo-loveit/saltstack-config-part-04/Salt-47.PNG"
            data-srcset="/hugo-loveit/saltstack-config-part-04/Salt-47.PNG, /hugo-loveit/saltstack-config-part-04/Salt-47.PNG 1.5x, /hugo-loveit/saltstack-config-part-04/Salt-47.PNG 2x"
            data-sizes="auto"
            alt="/hugo-loveit/saltstack-config-part-04/Salt-47.PNG" width="1543" height="966" />
    </a><figcaption class="image-caption">Click to see Larger Image</figcaption>
    </figure>
<hr>
<h6 id="lessons-learned">Lessons Learned:</h6>
<ul>
<li>Grains are a good way to create SaltStack Config Targets. Allows you to group VMs together the same way you can in vCenter.</li>
<li>The Grains file is basically a Database that can be any information that you want to show about your VMs. In this Blog post I am adding vCenter TAGs to the minions but the information could be anything that helps you target VMs.</li>
<li>If the default list of grains OOTB doesn&rsquo;t show the information you want to see, you can easily add your own gains with a little bit of code.</li>
</ul>
<hr>
<h6 id="salt-links-i-found-to-be-very-helpful">Salt Links I found to be very helpful:</h6>
<ul>
<li><a href="https://sites.google.com/site/mrxpalmeiras/saltstack/salt-cheat-sheet" target="_blank">SaltStack Cheat Sheet</a></li>
<li><a href="https://docs.saltproject.io/en/getstarted/"                            target="_blank">SaltStack Tutorials</a></li>
<li><a href="https://docs.saltproject.io/en/latest/contents.html"                   target="_blank">SaltStack Documentation</a></li>
<li><a href="https://saltstackcommunity.slack.com"                                  target="_blank">SaltStack Community Slack Channel</a></li>
<li><a href="https://learnvrealizeautomation.github.io"                             target="_blank">Learn vRealize Automation</a></li>
<li><a href="https://learnsaltstackconfig.github.io/"                               target="_blank">Learn SaltStack Config</a></li>
</ul>
<div style="background-color:#ccffcc; Padding:20px;" >
When I write about <b>vRealize Automation</b> ("vRA") I always say there are many ways to accomplish the same task.  <b>SaltStack Config</b> is the same way.  I am showing what I felt was important to see but every organization/environment will be different. There is no right or wrong way to use Salt. This is a <b>GREAT Tool</b> that is included with your vRealize Suite Advanced/Enterprise license. If you own the vRealize Suite, you own SaltStack Config.
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-01-15</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/hugo-loveit/saltstack-config-part-04/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://dalehassinger.github.io/hugo-loveit/saltstack-config-part-04/" data-title="VMware vRealize SaltStack Config as a Windows Server Admin - Part 4" data-via="dalehassinger" data-hashtags="SaltStack Config,VMware Aria Automation,vRealize Automation,PowerShell,Windows Server,Configuration Management,Grains"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://dalehassinger.github.io/hugo-loveit/saltstack-config-part-04/" data-hashtag="SaltStack Config"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://dalehassinger.github.io/hugo-loveit/saltstack-config-part-04/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/hugo-loveit/tags/saltstack-config/">SaltStack Config</a>,&nbsp;<a href="/hugo-loveit/tags/vmware-aria-automation/">VMware Aria Automation</a>,&nbsp;<a href="/hugo-loveit/tags/vrealize-automation/">vRealize Automation</a>,&nbsp;<a href="/hugo-loveit/tags/powershell/">PowerShell</a>,&nbsp;<a href="/hugo-loveit/tags/windows-server/">Windows Server</a>,&nbsp;<a href="/hugo-loveit/tags/configuration-management/">Configuration Management</a>,&nbsp;<a href="/hugo-loveit/tags/grains/">Grains</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/hugo-loveit/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/hugo-loveit/saltstack-config-part-03/" class="prev" rel="prev" title="VMware vRealize SaltStack Config as a Windows Server Admin - Part 3"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>VMware vRealize SaltStack Config as a Windows Server Admin - Part 3</a>
            <a href="/hugo-loveit/saltstack-config-part-05/" class="next" rel="next" title="VMware vRealize SaltStack Config as a Windows Server Admin - Part 5">VMware vRealize SaltStack Config as a Windows Server Admin - Part 5<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Designed | Developed By vCROCS</div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/hugo-loveit/" target="_blank">| Dale Hassinger</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://www.vCROCS.info" target="_blank">www.vCROCS.info</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://vcrocs.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"lightgallery":true,"search":{"highlightTag":"em","lunrIndexURL":"/hugo-loveit/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/hugo-loveit/js/theme.min.js"></script></body>
</html>
